(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["layout"],{c668:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"p-4 min-h-screen relative"},[s("audio",{attrs:{id:"remoteAudio"}}),"On Call"!==t.callStatus&&"held"!==t.callStatus?s("div",[s("div",{staticClass:"flex items-center justify-between"},[s("div",[s("Status",{attrs:{status:"Available"}})],1),s("div",[s("font-awesome-icon",{staticClass:"text-gray-600 text-3xl",attrs:{icon:"cog"}})],1)]),s("div",{staticClass:"mt-10"},[s("div",{staticClass:"text-center font-bold"},[s("span",{staticClass:"text-lg font-bold"},[t._v("Call Status : ")]),s("span",{staticClass:"text-purple-800 font-bold"},[t._v(t._s(t.callStatus)+"...")])])]),0==t.showCallRecievingDialog?s("div",{staticClass:"mt-4 text-center"},[s("div",{staticClass:"text-gray-500 font-bold"},[t._v("Type a phone number")])]):t._e(),s("div",{staticClass:"mt-4 text-center"},[s("div",{staticClass:"text-4xl min-w-full h-6"},[t._v(t._s(t.phoneNumber))])]),0==t.showCallRecievingDialog?s("div",{staticClass:"mt-4 dialer"},[s("div",{staticClass:"flex flex-wrap justify-center"},[s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 active:bg-violet-700 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("1")}}},[t._v(" 1")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("2")}}},[t._v(" 2")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("3")}}},[t._v(" 3")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("4")}}},[t._v(" 4")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("5")}}},[t._v(" 5")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("6")}}},[t._v(" 6")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("7")}}},[t._v(" 7")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("8")}}},[t._v(" 8")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("9")}}},[t._v(" 9")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("+")}}},[t._v(" +")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.push("0")}}},[t._v(" 0")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.backspace()}}},[t._v(" âŒ«")])]),s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800",on:{click:function(e){return t.call()}}},[s("div",[s("font-awesome-icon",{staticClass:"transform rotate-90",attrs:{icon:"phone"}})],1)])])])]):s("div",[s("div",{staticClass:"absolute bottom-0 left-0 p-10 w-full"},[s("div",{staticClass:"flex jusitfy-between w-full"},[s("div",{staticClass:"flex-1 text-center mb-2 mt-16",on:{click:t.answer}},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-green-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-gray-100"},[s("div",[s("font-awesome-icon",{staticClass:"transform rotate-90",attrs:{icon:"phone"}})],1)])])])])])]):s("div",[0==t.showCallRecievingDialog?s("div",[s("div",{staticClass:"mt-4 text-center"},[s("div",{staticClass:"text-4xl min-w-full h-6"},[t._v(t._s(t.phoneNumber))])]),s("div",{staticClass:"mt-4 text-center font-bold text-xl"},[t._v(" "+t._s(t.zeroPad(t.minutess,2))+" : "+t._s(t.zeroPad(t.secondss,2))+" ")]),s("div",{staticClass:"absolute bottom-0 w-full left-0"},[s("div",{staticClass:"flex justify-center"},[s("div",{staticClass:"text-6xl flex-1 flex items-center justify-center"},["held"==t.callStatus?s("span",{on:{click:t.unhold}},[s("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:["far","play-circle"]}})],1):s("span",{on:{click:t.hold}},[s("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:["far","pause-circle"]}})],1)]),s("div",{staticClass:"text-6xl flex-1 flex items-center justify-center"},[t.muted?s("span",{on:{click:t.mute}},[s("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:["fas","volume-up"]}})],1):s("span",{on:{click:t.mute}},[s("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:["fas","volume-mute"]}})],1)])]),s("div",{staticClass:"flex justify-center items-center mt-8 mb-8"},[s("div",{staticClass:"text-5xl flex-1 flex items-center justify-center "},[s("div",{staticClass:"bg-red-500 p-3 rounded rounded-full cursor-pointer",on:{click:t.disconnect}},[s("font-awesome-icon",{staticClass:"transform rotate-90",attrs:{icon:["fas","phone"]}})],1)])])])]):s("div",[s("div",[s("div",{staticClass:"w-1/3 text-center mb-2"},[s("div",{staticClass:"mx-auto w-20 h-20 cursor-pointer bg-gray-400 hover:bg-gray-500 rounded rounded-full flex items-center justify-center font-bold text-xl text-purple-800"},[s("div",[s("font-awesome-icon",{staticClass:"transform rotate-90",attrs:{icon:"phone"}})],1)])])])])])])])},n=[],r=s("1da1"),a=(s("d3b7"),s("25f0"),s("a15b"),s("caad"),s("fb6a"),s("96cf"),s("a131")),l=s("bc3a"),o=s.n(l),c={props:["id"],mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={expires_in:1e4,resource:t.id},e.next=3,o.a.post("/api/relay/test",s);case 3:i=e.sent,n=i.data,t.client=new a["a"]({project:n.project_id,token:n.jwt_token}),t.client.remoteElement="remoteAudio",t.client.iceServers=[{urls:["stun:stun.l.google.com:19302"]}],t.client.on("signalwire.notification",t.handleNotification),t.client.enableMicrophone(),t.client.connect(),window.addEventListener("keyup",t.keydown);case 12:case"end":return e.stop()}}),e)})))()},data:function(){return{showCallRecievingDialog:!1,muted:!1,minutess:0,secondss:0,timer:"",client:null,currentCall:null,phoneNumber:"",callStatus:"idle",options:[{text:"available",value:"available"},{text:"idle",value:"idle"}]}},methods:{zeroPad:function(t,e){var s=e-t.toString().length+1;return Array(+(s>0&&s)).join("0")+t},unhold:function(){this.currentCall.unhold()},hold:function(){clearInterval(this.timer),this.currentCall.hold()},disconnect:function(){this.currentCall.hangup(),this.secondss=0,this.minutess=0,clearInterval(this.timer)},mute:function(){this.muted=!this.muted,this.currentCall.toggleAudioMute()},keydown:function(t){["0","1","2","3","4","5","6","7","8","9","+"].includes(t.key)?this.phoneNumber=this.phoneNumber+t.key:"Backspace"==t.key&&this.backspace()},call:function(){var t={destinationNumber:this.phoneNumber};this.currentCall=this.client.newCall(t)},push:function(t){this.phoneNumber=this.phoneNumber+t},backspace:function(){this.phoneNumber=this.phoneNumber.slice(0,-1)},answer:function(){this.showCallRecievingDialog=!1,this.currentCall.answer()},dismiss:function(){this.phoneNumber=null,this.callStatus="idle",this.currentCall.hangup(),this.showCallRecievingDialog=!1},handleNotification:function(t){switch(t.type){case"callUpdate":this.handleCallUpdate(t.call);break;case"userMediaError":break}},runTimer:function(){59==this.secondss?(this.secondss=0,this.minutess++):this.secondss++},handleCallUpdate:function(t){switch(this.currentCall=t,console.log(t),t.state){case"new":break;case"trying":this.callStatus="Calling";break;case"recovering":confirm("Recover the previous call?")?this.currentCall.answer():this.currentCall.hangup(),this.callStatus="Recovering";break;case"ringing":this.phoneNumber=this.currentCall.options.remoteCallerNumber,this.callStatus="Ringing",this.showCallRecievingDialog=!0;break;case"active":this.callStatus="On Call";var e=this;this.timer=setInterval(e.runTimer,1e3);break;case"hangup":this.callStatus="hangup",this.phoneNumber="",this.showCallRecievingDialog=!1;break;case"destroy":this.callStatus="idle",this.phoneNumber="",this.showCallRecievingDialog=!1;break;case"held":this.callStatus="held";break}}}},u=c,d=s("2877"),f=Object(d["a"])(u,i,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=layout.js.map